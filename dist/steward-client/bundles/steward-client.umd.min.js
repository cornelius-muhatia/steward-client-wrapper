!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("@swimlane/ngx-datatable"),require("queue-typescript"),require("@angular/cdk/collections"),require("@angular/material/core"),require("@angular/material"),require("@angular/common")):"function"==typeof define&&define.amd?define("steward-client",["exports","@angular/core","@angular/common/http","rxjs","rxjs/operators","@angular/forms","@swimlane/ngx-datatable","queue-typescript","@angular/cdk/collections","@angular/material/core","@angular/material","@angular/common"],e):e(t["steward-client"]={},t.ng.core,t.ng.common.http,t.rxjs,t.rxjs.operators,t.ng.forms,null,null,t.ng.cdk.collections,t.ng.material.core,t.ng.material,t.ng.common)}(this,function(t,n,o,r,a,i,s,l,e,c,m,p){"use strict";var u=function D(){},h=function A(){},d=function(){function t(t,e){this.http=t,this.config=e,this.base_url="/",this.base_url=e.base_url,e.headers?this.headers=e.headers.append("Content-Type","application/json; charset=utf-8"):this.headers=new o.HttpHeaders({"Content-Type":"application/json; charset=utf-8"}),e.access_token&&(this.headers=this.headers.append("Authorization","Bearer "+e.access_token))}return t.prototype.setToken=function(t){this.config.access_token?this.headers.set("Authorization","Bearer "+t):this.headers=this.headers.append("Authorization","Bearer "+t)},t.prototype.post=function(t,e){return this.http.post(this.serviceURL(t),JSON.stringify(e),{headers:this.headers}).pipe(a.catchError(this.handleError()))},t.prototype.put=function(t,e){return this.http.put(this.serviceURL(t),JSON.stringify(e),{headers:this.headers}).pipe(a.catchError(this.handleError()))},t.prototype["delete"]=function(t,e){return this.http.request("delete",this.serviceURL(t),{headers:this.headers,body:JSON.stringify(e)}).pipe(a.catchError(this.handleError()))},t.prototype.get=function(t,e){var n={headers:this.headers,params:this.getHttpParams(e)};return this.http.get(this.serviceURL(t),n).pipe(a.catchError(this.handleError()))},t.prototype.getFile=function(t,e){var n={params:this.getHttpParams(e)};return this.http.get(this.serviceURL(t)+"?access_token="+this.token,n).pipe(a.catchError(this.handleError()))},t.prototype.postFormData=function(t,e,n){var r=new FormData;return Object.keys(e).forEach(function(t){r.append(t,e[t])}),this.headers.get("Authorization")&&!n?n=new o.HttpHeaders({Authorization:"Bearer "+this.token}):n||(n=new o.HttpHeaders),this.http.post(this.serviceURL(t),r,{headers:n}).pipe(a.catchError(this.handleError()))},t.prototype.postFormDataMultipart=function(t,n){var r=new FormData;return Object.keys(n).forEach(function(e){Array.isArray(n[e])?n[e].forEach(function(t){r.append(e,t)}):r.append(e,n[e])}),this.http.post(this.serviceURL(t),r,{headers:new o.HttpHeaders({Authorization:"Bearer "+this.token})}).pipe(a.catchError(this.handleError()))},t.prototype.putFormDataMultiPart=function(t,n){var r=new FormData;return Object.keys(n).forEach(function(e){Array.isArray(n[e])?n[e].forEach(function(t){r.append(e,t)}):r.append(e,n[e])}),this.http.put(this.serviceURL(t),r,{headers:new o.HttpHeaders({Authorization:"Bearer "+this.token})}).pipe(a.catchError(this.handleError()))},t.prototype.getHttpParams=function(t){if(t==undefined)return new o.HttpParams;var n=new o.HttpParams;return t.forEach(function(t,e){n=n.append(e,t)}),n},t.prototype.handleError=function(){return function(t){var e=new u;return 500==t.status?(e.status=t.status,e.message="Sorry internal server error occured please try again later"):(e.status=t.status,e.message=t.error.message,e.data=t.error.data),r.of(e)}},t.renderMore=function(t){return"<div class='actions-buttons center' id='"+t+"'><i class='fa fa-check' title='Approve'></i> <i class='fa fa-ban' title='Decline'></i></div>"},t.prototype.intiateDataTable=function(t,e){var n={headers:this.headers,params:this.getHttpParams(e)};return this.http.get(this.serviceURL(t),n).pipe(a.catchError(this.handleError()))},t.prototype.isURL=function(t){try{return new URL(t),!0}catch(e){return!1}},t.prototype.serviceURL=function(t){return this.isURL(t)?t:this.base_url+t},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:o.HttpClient},{type:h}]},t}(),f=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:n.Component,args:[{selector:"stw-steward-client",template:"\n    <p>\n      steward-client works!\n    </p>\n  ",styles:[]}]}],t.ctorParameters=function(){return[]},t}(),g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function y(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||0<e--)&&!(r=a.next()).done;)i.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=a["return"])&&n.call(a)}finally{if(o)throw o.error}}return i}var v=function P(){this.size=10,this.totalElements=0,this.totalPages=0,this.first=!0,this.last=!1,this.content=[],this.sorted=new b,this.number=0},b=function L(){this.sorted=!1,this.unsorted=!0},x=function R(t,e,n,r,o,a){void 0===r&&(r="fa fa-file-text-o"),void 0===o&&(o=!1),void 0===a&&(a=null),this.placeholder="",this.label=t,this.name=e,this.controlType=n,this.icon=r,this.isRequired=o,this.placeholder=a||t},w=function O(t){void 0===t&&(t="text"),this.type=t,this.minLength=this.min=0,this.maxLength=4e3,this.max=1e9},F=function _(t,e){void 0===t&&(t=5),void 0===e&&(e=1),this.cols=t,this.rows=e,this.maxLength=4e3,this.minLength=0},k=function j(t){this.options=t},C=function q(t,e){void 0===e&&(e=null),this.value=t,this.text=e||t},M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function r(t,e){function n(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.format=function(t,e){if("input"===e){var n=t.getDate(),r=t.getMonth()+1;return t.getFullYear()+"-"+(r<10?"0"+r:""+r)+"-"+(n<10?"0"+n:""+n)}return t.toDateString()},e}(m.NativeDateAdapter),E={parse:{dateInput:{month:"numeric",year:"numeric",day:"numeric"}},display:{dateInput:"input",monthYearLabel:{year:"numeric",month:"numeric"},dateA11yLabel:{year:"numeric",month:"numeric",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}},S=function(){function t(t){this.sterwardService=t,this.displayedColumns=["checkbox"],this.selection=new e.SelectionModel(!0,[]),this.rowSelection=new n.EventEmitter,this.columns=[],this.enableCheckbox=!0,this.actionsEvent=new n.EventEmitter,this.filterComponents=[],this.showDefaultFilters=!0,this.selected=[],this.filter={},this.isLoadingResults=!1,this.page=new v,this.page.content=[],this.datePipe=new p.DatePipe("en-US")}return t.prototype.ngOnInit=function(){var e=this;this.columns.forEach(function(t){e.displayedColumns.push(t.fieldName)}),this.moreActions?this.displayedColumns.push("actions"):console.debug("moreActions not injected skipping rendering 'More Actions' column");var n={};this.filterComponents.forEach(function(t){var e=[];t.isRequired&&e.push(i.Validators.required),(t.controlType instanceof w||t.controlType instanceof F)&&(e.push(i.Validators.minLength(t.controlType.minLength)),e.push(i.Validators.maxLength(t.controlType.maxLength))),t.controlType instanceof w&&(e.push(i.Validators.max(t.controlType.max)),e.push(i.Validators.min(t.controlType.min))),n[t.name]=new i.FormControl("",e)}),n.from=new i.FormControl("",i.Validators.maxLength(100)),n.to=new i.FormControl("",i.Validators.maxLength(100)),n.needle=new i.FormControl("",i.Validators.maxLength(200)),this.filterForm=new i.FormGroup(n),this.loadPage({offset:0,limit:this.page.size},null)},t.prototype.ngAfterViewInit=function(){this.rowSelection.emit(this.selection)},t.prototype.isAllSelected=function(){return this.selection.selected.length==this.page.content.length},t.prototype.masterToggle=function(){var e=this;this.isAllSelected()?this.selection.clear():this.page.content.forEach(function(t){return e.selection.select(t)})},t.prototype.onActionClick=function(t){this.actionsEvent.emit(t)},t.prototype.loadPage=function(t,e){var n,r=this;this.endpoint&&(this.isLoadingResults=!0,n=e||new Map,this.params&&this.params.forEach(function(t,e){null!=e&&e!=undefined&&n.set(e,t)}),n.set("page",t.offset),n.set("size",t.limit),this.sterwardService.get(this.endpoint,n).subscribe(function(t){200==t.status&&(r.page=t.data),r.isLoadingResults=!1},function(t){console.debug("Server request has failed"),r.isLoadingResults=!1}))},t.prototype.pageEvent=function(t){this.loadPage({limit:t.pageSize,offset:t.pageIndex},this.getFilters())},t.prototype.processSorting=function(t){this.sortParams=t,this.loadPage({limit:this.page.size,offset:0},this.getFilters())},t.prototype.getFilters=function(){var n=this,r=new Map;return Object.keys(this.filterForm.value).forEach(function(t,e){n.filterForm.value[t]&&("from"==t||"to"==t?r.set(t,n.datePipe.transform(n.filterForm.value[t],"yyyy-MM-dd")):r.set(t,n.filterForm.value[t]))}),this.sortParams&&r.set("sort",this.sortParams.active+","+this.sortParams.direction),r},t.prototype.processFilter=function(t){this.loadPage({offset:this.page.number,limit:this.page.size},this.getFilters())},t.prototype.isInput=function(t){return t instanceof w},t.prototype.isSelect=function(t){return t instanceof k},t.prototype.isTextArea=function(t){return t instanceof F},t.prototype.getFormattedDate=function(t){var e=t.getFullYear(),n=(1+t.getMonth()).toString();n=1<n.length?n:"0"+n;var r=t.getDate().toString();return e+"-"+n+"-"+(r=1<r.length?r:"0"+r)},t.prototype.getFieldValue=function(t,e){if(e.callback)return e.callback(t);var n=e.fieldName.split("."),r=new(l.Queue.bind.apply(l.Queue,function a(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(y(arguments[e]));return t}([void 0],n))),o=this.getObjectValue(t,r);return e.isDateColumn?this.datePipe.transform(o,"medium"):o},t.prototype.getObjectValue=function(e,n){var r=this;if(!(e instanceof Object)||1==n.length)return e[n.tail];var o=null;return Object.keys(e).forEach(function(t){t==n.front&&e[t]instanceof Object?o=r.getObjectValue(e[t],n):t==n.tail&&(o=e[t])}),o},t.prototype.refreshTable=function(){console.debug("Refreshed data tables"),this.loadPage({offset:this.page.number,limit:this.page.size},this.getFilters())},t.decorators=[{type:n.Component,args:[{selector:"tgr-material-table",template:'<div class="row"  *ngIf="showDefaultFilters || filterComponents.length > 0">\n  <div class="col-md-12">\n    <div class="card card-outline-default mat-elevation-z4">\n      <div class="card-body">\n        <div class="row">\n          <div class="col-md-12">\n            <div class="mat-table-filter">\n                <button title="Refresh" (click) = "refreshTable()" mat-icon-button color="basic" type="reset"><mat-icon>refresh</mat-icon></button>\n            </div>\n          </div>\n        </div>\n        <form (ngSubmit)="processFilter(filterForm)" [formGroup]="filterForm">\n          <div class="row">\n            <div class="col-md-3  mb-3" *ngFor="let control of filterComponents">\n              \x3c!-- Intialize form select control --\x3e\n              <mat-form-field class="col-md-12" *ngIf="isSelect(control.controlType)">\n                <mat-select [placeholder]="control.placeholder" [formControlName]="control.name">\n                  <mat-option *ngFor="let o of control.controlType.options" [value]="o.value">\n                    {{o.text}}\n                  </mat-option>\n                </mat-select>\n                <mat-error *ngIf="filterForm.get(control.name).hasError(\'required\')">{{control.placeholder}}\n                  is required</mat-error>\n              </mat-form-field>\n\n              \x3c!-- Intialize form textarea control --\x3e\n              <mat-form-field class="col-md-12" *ngIf="isTextArea(control.controlType)">\n                <textarea matInput [formControlName]="control.name" [placeholder]="control.label" [cols]="control.controlType.cols"\n                  [rows]="control.controlType.rows"></textarea>\n                <mat-error *ngIf="filterForm.get(control.name).hasError(\'required\')">{{control.placeholder}}\n                  is required</mat-error>\n                <mat-error *ngIf="filterForm.get(control.name).hasError(\'minlength\')">Minimum of\n                  {{control.controlType.minLength}} characters</mat-error>\n                <mat-error *ngIf="filterForm.get(control.name).hasError(\'maxlength\')">Maximum of\n                  {{control.controlType.maxLength}} characters</mat-error>\n              </mat-form-field>\n\n              \x3c!-- Intialize form input control --\x3e\n              <mat-form-field class="col-md-12" *ngIf="isInput(control.controlType)">\n                \x3c!-- <mat-icon matPrefix class="material-icons icon-margin-right">perm_identity</mat-icon> --\x3e\n                <input matInput [placeholder]="control.label" [type]="control.controlType.type" [formControlName]="control.name" />\n                <mat-error *ngIf="filterForm.get(control.name).hasError(\'required\')">{{control.placeholder}}\n                  is required</mat-error>\n                <mat-error *ngIf="filterForm.get(control.name).hasError(\'minlength\')">Minimum of\n                  {{control.controlType.minLength}} characters</mat-error>\n                <mat-error *ngIf="filterForm.get(control.name).hasError(\'maxlength\')">Maximum of\n                  {{control.controlType.maxLength}} characters</mat-error>\n                <mat-error *ngIf="filterForm.get(control.name).hasError(\'min\')">Should be greater than\n                  {{control.controlType.min}}</mat-error>\n                <mat-error *ngIf="filterForm.get(control.name).hasError(\'max\')">Should be less than\n                  {{control.controlType.max}}</mat-error>\n              </mat-form-field>\n            </div>\n            <div class="col-md-3 mb-3" *ngIf="showDefaultFilters">\n              \x3c!-- <mat-icon matPrefix class="material-icons col-md-3">date_range</mat-icon> --\x3e\n              <mat-form-field class="col-md-12">\n                <input matInput placeholder="From" type="date" [matDatepicker]="picker" formControlName="from" />\n                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>\n                <mat-datepicker #picker></mat-datepicker>\n              </mat-form-field>\n            </div>\n            <div class="col-md-3 mb-3" *ngIf="showDefaultFilters">\n              <mat-form-field class="col-md-12">\n                \x3c!-- <mat-icon>home</mat-icon> --\x3e\n                <input matInput placeholder="To" type="date" [matDatepicker]="toPicker" formControlName="to" />\n                <mat-datepicker-toggle matSuffix [for]="toPicker"></mat-datepicker-toggle>\n                <mat-datepicker #toPicker></mat-datepicker>\n              </mat-form-field>\n            </div>\n            <div class="col-md-3 mb-3" *ngIf="showDefaultFilters">\n              <mat-form-field class="col-md-12">\n                <input matInput maxlength="100" placeholder="Search" type="text" formControlName="needle" />\n              </mat-form-field>\n            </div>\n            <span class="help-block" *ngIf="filterForm.get(\'from\').touched">\n              <span class="text-danger" *ngIf="filterForm.get(\'from\').hasError(\'maxlength\')">Maximum of 200 characters</span>\n            </span>\n          </div>\n          <div class="row">\n            <div class="col-md-12">\n              <div class="pull-right mat-table-filter">\n                <button mat-raised-button color="primary" type="submit" [disabled]="filterForm.invalid">Filter</button>\n                <button mat-raised-button color="basic" type="reset">Reset</button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-md-12">\n      <div class="mat-table-loading-shade" *ngIf="isLoadingResults">\n        <mat-spinner *ngIf="isLoadingResults"></mat-spinner>\n      </div>\n    <table mat-table [dataSource]="page.content" class="mat-elevation-z8" style="width: 100%" matSort (matSortChange)="processSorting($event)">\n\n      \x3c!--- Note that these columns can be defined in any order.\n          The actual rendered columns are set as a property on the row definition" --\x3e\n\n      \x3c!-- Position Column --\x3e\n      <ng-container matColumnDef="checkbox">\n        <th mat-header-cell *matHeaderCellDef>\n          <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()"\n            [indeterminate]="selection.hasValue() && !isAllSelected()">\n          </mat-checkbox>\n        </th>\n        \x3c!-- <td mat-cell *matCellDef="let element"> <mat-checkbox></mat-checkbox> </td> --\x3e\n        <td mat-cell *matCellDef="let row">\n          <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null" [checked]="selection.isSelected(row)">\n          </mat-checkbox>\n        </td>\n      </ng-container>\n\n      \x3c!-- Fields Columns --\x3e\n      <ng-container [matColumnDef]="c.fieldName" *ngFor="let c of columns">\n        <th mat-header-cell *matHeaderCellDef mat-sort-header [class.hide_on_xs]="c.hideOnXs"> {{c.columnName}} </th>\n        <td mat-cell *matCellDef="let element" [class.hide_on_xs]="c.hideOnXs"> \n          \x3c!-- {{c.isDateColumn ?\n          (getFieldValue(element, c) | date:\'medium\') :\n          getFieldValue(element, c)}} --\x3e\n           <div [innerHtml] = "getFieldValue(element, c)"></div></td>\n      </ng-container>\n\n      \x3c!-- Other Column --\x3e\n      <ng-container matColumnDef="actions" *ngIf="moreActions">\n        <th mat-header-cell *matHeaderCellDef> {{moreActions.name}} </th>\n        <td mat-cell *matCellDef="let element">\n          <button mat-icon-button [matMenuTriggerFor]="menu">\n            <mat-icon>list</mat-icon>\n          </button>\n          <mat-menu #menu="matMenu">\n            <button mat-menu-item *ngFor="let action of moreActions.actions" (click)="onActionClick({id: element[moreActions.idFieldName], actionName: action.actionName})">{{action.actionName}}</button>\n          </mat-menu>\n        </td>\n      </ng-container>\n      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>\n      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>\n    </table>\n    <mat-paginator (page)="pageEvent($event)" [length]="page.totalElements" [pageSize]="20" [pageSizeOptions]="[1, 5, 10, 20, 50, 100, 200]">\n    </mat-paginator>\n  </div>\n</div>',styles:[".mat-table-filter button{margin-right:8px;float:right}@media (max-width:576px){.hide_on_xs{display:none}}.mat-table-loading-shade{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}"],providers:[{provide:c.DateAdapter,useClass:M},{provide:c.MAT_DATE_FORMATS,useValue:E}]}]}],t.ctorParameters=function(){return[{type:d}]},t.propDecorators={selection:[{type:n.Output}],rowSelection:[{type:n.Output}],sort:[{type:n.ViewChild,args:[m.MatSort]}],columns:[{type:n.Input}],enableCheckbox:[{type:n.Input}],endpoint:[{type:n.Input}],moreActions:[{type:n.Input}],actionsEvent:[{type:n.Output}],filterComponents:[{type:n.Input}],params:[{type:n.Input}],showDefaultFilters:[{type:n.Input}],table:[{type:n.ViewChild,args:[s.DatatableComponent]}]},t}(),T=function N(t,e,n){this.name="Actions",this.idFieldName="id",this.actions=t,this.name=n,this.idFieldName=e},I=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:h,useValue:t}]}},e.decorators=[{type:n.NgModule,args:[{imports:[i.FormsModule,i.ReactiveFormsModule,s.NgxDatatableModule,p.CommonModule,o.HttpClientModule,m.MatInputModule,m.MatTableModule,m.MatCheckboxModule,m.MatIconModule,m.MatDatepickerModule,m.MatNativeDateModule,m.MatPaginatorModule,m.MatSelectModule,m.MatButtonModule,m.MatSortModule,m.MatMenuModule,m.MatProgressSpinnerModule],declarations:[f,S],exports:[f,S]}]}],e}();t.StewardConfig=h,t.StewardClientService=d,t.StewardClientComponent=f,t.StewardClientModule=I,t.Page=v,t.Sort=b,t.ResponseWrapper=u,t.AppDateAdapter=M,t.APP_DATE_FORMATS=E,t.TgrMaterialTableComponent=S,t.TgrMoreActions=T,t.TgrDynamicControl=x,t.TgrInput=w,t.TgrTextarea=F,t.TgrSelect=k,t.TgrSelectOption=C,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=steward-client.umd.min.js.map